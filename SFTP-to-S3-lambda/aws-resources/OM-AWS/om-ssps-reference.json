{
  "Role":{
    "Type":"AWS::IAM::Role",
    "Properties":{
      "AssumeRolePolicyDocument":{
        "Version":"2012-10-17",
        "Statement":[
          {
            "Effect":"Allow",
            "Principal":{
              "Federated":"arn:aws:iam::441100410897:saml-provider/customer-saml"
            },
            "Action":"sts:AssumeRoleWithSAML",
            "Condition":{
              "StringEquals":{
                "SAML:aud":"https://signin.aws.amazon.com/saml"
              }
            }
          }
        ]
      },
      "RoleName":"customer_om_dataplatform_ssps_role",
      "Path":"/",
      "ManagedPolicyArns":[
        "arn:aws:iam::aws:policy/ReadOnlyAccess",
        "arn:aws:iam::441100410897:policy/customer_sagemaker_admin_policy",
        "arn:aws:iam::441100410897:policy/customer_om_dataplatform_ssps_cloudformation_policy",
        "arn:aws:iam::441100410897:policy/customer_glue_console_policy",
        "arn:aws:iam::441100410897:policy/customer_dynamodb_policy",
        "arn:aws:iam::441100410897:policy/customer_quicksight_console_admin_policy",
        "arn:aws:iam::441100410897:policy/customer_lakeformation_admin_role_policy",
        "arn:aws:iam::441100410897:policy/customer_systemsmanager_parameterstore_policy",
        "arn:aws:iam::441100410897:policy/customer_codebuild_console_admin_policy",
        "arn:aws:iam::441100410897:policy/AMSChangeManagementPolicy",
        "arn:aws:iam::441100410897:policy/customer_secrets_manager_console_policy",
        "arn:aws:iam::441100410897:policy/AMSS3Policy",
        "arn:aws:iam::441100410897:policy/customer_athena_policy",
        "arn:aws:iam::441100410897:policy/customer_lambda_admin_policy",
        "arn:aws:iam::aws:policy/AWSLakeFormationDataAdmin"
      ],
      "Policies":[
        {
          "PolicyName":"customer_cloudformation_console_policy",
          "PolicyDocument":{
            "Version":"2012-10-17",
            "Statement":[
              {
                "Action":[
                  "iam:PassRole"
                ],
                "Effect":"Allow",
                "Resource":[
                  "arn:aws:iam::441100410897:role/customer_oml_cicd*"
                ],
                "Condition":{
                  "StringLike":{
                    "iam:PassedToService":[
                      "cloudformation.amazonaws.com"
                    ]
                  }
                }
              },
              {
                "Action":[
                  "iam:PassRole"
                ],
                "Effect":"Allow",
                "Resource":[
                  "arn:aws:iam::441100410897:role/customer_oml_cicd*"
                ]
              }
            ]
          }
        },
        {
          "PolicyName":"customer_codecommit_policy",
          "PolicyDocument":{
            "Version":"2012-10-17",
            "Statement":[
              {
                "Sid":"AllowAccesstoListRepositories",
                "Effect":"Allow",
                "Action":"codecommit:ListRepositories",
                "Resource":"*"
              },
              {
                "Sid":"AllowAccessToCodeCommit",
                "Effect":"Allow",
                "NotAction":[
                  "codecommit:PutRepositoryTriggers",
                  "codecommit:TestRepositoryTriggers"
                ],
                "Resource":"arn:aws:codecommit:*:*:*"
              },
              {
                "Sid":"AllowAccesstoListTopics",
                "Effect":"Allow",
                "Action":"sns:ListTopics",
                "Resource":"*"
              },
              {
                "Sid":"AllowAccessToSNS",
                "Effect":"Allow",
                "Action":[
                  "sns:GetTopicAttributes",
                  "sns:SetTopicAttributes",
                  "sns:ListSubscriptionsByTopic"
                ],
                "Resource":"arn:aws:sns:*:*:customer*"
              },
              {
                "Sid":"AllowReadOnlyAccessOnCloudWatchEvents",
                "Effect":"Allow",
                "Action":[
                  "events:DescribeRule",
                  "events:DescribePartnerEventSource",
                  "events:DescribeEventSource",
                  "events:DescribeEventBus",
                  "events:ListEventBuses",
                  "events:ListPartnerEventSourceAccounts",
                  "events:ListRuleNamesByTarget",
                  "events:ListPartnerEventSources",
                  "events:ListEventSources",
                  "events:ListTagsForResource",
                  "events:ListRules",
                  "events:ListTargetsByRule",
                  "events:TestEventPattern"
                ],
                "Resource":"*"
              },
              {
                "Sid":"CloudWatchEventsPutRule",
                "Effect":"Allow",
                "Action":"events:PutRule",
                "Resource":"arn:aws:events:*:*:rule/codecommit*",
                "Condition":{
                  "StringEquals":{
                    "events:source":"aws.codecommit"
                  },
                  "ForAnyValue:StringLike":{
                    "events:detail-type":[
                      "CodeCommit Pull Request State Change",
                      "CodeCommit Comment on Pull Request",
                      "CodeCommit Comment on Commit"
                    ]
                  }
                }
              },
              {
                "Sid":"CloudWatchEventsCodeCommitRulesAccess",
                "Effect":"Allow",
                "Action":[
                  "events:DisableRule",
                  "events:EnableRule",
                  "events:PutTargets",
                  "events:RemoveTargets"
                ],
                "Resource":"arn:aws:events:*:*:rule/codecommit*"
              }
            ]
          }
        },
        {
          "PolicyName":"customer_code_pipeline_console_policy",
          "PolicyDocument":{
            "Version":"2012-10-17",
            "Statement":[
              {
                "Sid":"ReadOnlyAccessToRequiredResources",
                "Action":[
                  "codebuild:BatchGet*",
                  "codebuild:Get*",
                  "codebuild:List*",
                  "codecommit:BatchGet*",
                  "codecommit:BatchDescribe*",
                  "codecommit:Describe*",
                  "codecommit:Get*",
                  "codecommit:GitPull",
                  "codecommit:List*",
                  "codedeploy:Batch*",
                  "codedeploy:Get*",
                  "codedeploy:List*",
                  "codepipeline:*",
                  "cloudformation:DescribeStacks",
                  "cloudformation:ListChangeSets",
                  "cloudtrail:DescribeTrails",
                  "elasticbeanstalk:DescribeApplications",
                  "elasticbeanstalk:DescribeEnvironments",
                  "events:ListRules",
                  "iam:ListRoles",
                  "kms:ListAliases",
                  "lambda:GetFunctionConfiguration",
                  "lambda:ListFunctions",
                  "opsworks:DescribeApps",
                  "opsworks:DescribeLayers",
                  "opsworks:DescribeStacks",
                  "s3:GetBucketPolicy",
                  "s3:GetObject",
                  "s3:ListAllMyBuckets",
                  "s3:ListBucket",
                  "sns:List*"
                ],
                "Effect":"Allow",
                "Resource":"*"
              },
              {
                "Sid":"CloudWatchEvents",
                "Effect":"Allow",
                "Action":[
                  "events:DeleteRule",
                  "events:ListTargetsByRule",
                  "events:PutRule",
                  "events:PutTargets",
                  "events:RemoveTargets"
                ],
                "Resource":[
                  "arn:aws:events:*:*:rule/codepipeline-*"
                ]
              },
              {
                "Sid":"DenyAllCodeCommitActionsOnAMSRepositories",
                "Effect":"Deny",
                "Action":[
                  "codecommit:*"
                ],
                "Resource":[
                  "arn:aws:codecommit:*:*:mc*",
                  "arn:aws:codecommit:*:*:AMS*",
                  "arn:aws:codecommit:*:*:ams*"
                ]
              },
              {
                "Sid":"DenyAllCodeDeployActionsOnAMSApplications",
                "Effect":"Deny",
                "Action":[
                  "codedeploy:*"
                ],
                "Resource":[
                  "arn:aws:codedeploy:*:*:application:mc*",
                  "arn:aws:codedeploy:*:*:application:AMS*",
                  "arn:aws:codedeploy:*:*:application:ams*",
                  "arn:aws:codedeploy:*:*:deploymentconfig:mc*",
                  "arn:aws:codedeploy:*:*:deploymentconfig:AMS*",
                  "arn:aws:codedeploy:*:*:deploymentconfig:ams*",
                  "arn:aws:codedeploy:*:*:deploymentgroup:mc*",
                  "arn:aws:codedeploy:*:*:deploymentgroup:AMS*",
                  "arn:aws:codedeploy:*:*:deploymentgroup:ams*",
                  "arn:aws:codedeploy:*:*:instance:mc*",
                  "arn:aws:codedeploy:*:*:instance:AMS*",
                  "arn:aws:codedeploy:*:*:instance:ams*"
                ]
              },
              {
                "Sid":"CloudTrailEvents",
                "Effect":"Allow",
                "Action":[
                  "cloudtrail:GetEventSelectors",
                  "cloudtrail:PutEventSelectors",
                  "cloudtrail:StartLogging"
                ],
                "Resource":[
                  "arn:aws:cloudtrail:*:*:trail/codepipeline-*"
                ]
              },
              {
                "Sid":"PassServiceRoles",
                "Effect":"Allow",
                "Action":"iam:PassRole",
                "Resource":[
                  "arn:aws:iam::*:role/aws_code_pipeline_service_role"
                ]
              }
            ]
          }
        },
        {
          "PolicyName":"customer_iampassrole_policy",
          "PolicyDocument":{
            "Version":"2012-10-17",
            "Statement":[
              {
                "Effect":"Allow",
                "Action":"iam:PassRole",
                "Resource":"arn:aws:iam::441100410897:role/oml-dp-lift-*"
              }
            ]
          }
        }
      ],
      "Description":"RFC 26b8e518-9da2-ecdd-e310-2e40c75b740b",
      "MaxSessionDuration":3600
    },
    "DeletionPolicy":"Delete"
  }
}